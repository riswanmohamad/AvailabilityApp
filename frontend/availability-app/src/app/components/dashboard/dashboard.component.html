<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Service Provider Dashboard</h1>
    <button 
      class="btn btn-primary" 
      routerLink="/services/create"
      type="button">
      + Create New Service
    </button>
  </header>

  <div class="dashboard-content">
    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>{{ services.length }}</h3>
        <p>Total Services</p>
      </div>
      <div class="stat-card">
        <h3>{{ activeServices }}</h3>
        <p>Active Services</p>
      </div>
      <div class="stat-card">
        <h3>{{ totalViews }}</h3>
        <p>Total Views</p>
      </div>
    </div>

    <!-- Services List -->
    <div class="services-section">
      <h2>Your Services</h2>
      
      <div *ngIf="isLoading" class="loading">
        Loading services...
      </div>

      <div *ngIf="!isLoading && services.length === 0" class="empty-state">
        <h3>No services yet</h3>
        <p>Create your first service to get started</p>
        <button 
          class="btn btn-primary" 
          routerLink="/services/create"
          type="button">
          Create Service
        </button>
      </div>

      <div *ngIf="!isLoading && services.length > 0" class="services-grid">
        <div *ngFor="let service of services" class="service-card">
          <div class="service-header">
            <h3>{{ service.title }}</h3>
            <div class="service-status">
              <span class="status-badge active">
                Active
              </span>
            </div>
          </div>
          
          <p class="service-description">{{ service.description }}</p>
          
          <div class="service-details" *ngIf="service.duration">
            <div class="detail-item">
              <span class="label">Duration:</span>
              <span class="value">{{ service.duration }} {{ service.durationUnit }}</span>
            </div>
          </div>

          <div class="service-actions">
            <button 
              class="btn btn-secondary" 
              [routerLink]="['/services', service.id, 'edit']"
              type="button">
              Edit
            </button>
            <button 
              class="btn btn-secondary" 
              [routerLink]="['/services', service.id, 'availability']"
              type="button">
              Manage Availability
            </button>
            <button 
              class="btn btn-secondary" 
              (click)="viewPublicLink(service)"
              type="button">
              Public Link
            </button>
            <button 
              class="btn btn-danger" 
              (click)="deleteService(service.id)"
              [disabled]="isDeletingService === service.id"
              type="button">
              {{ isDeletingService === service.id ? 'Deleting...' : 'Delete' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Public Link Modal -->
  <div *ngIf="showPublicLinkModal" class="modal-overlay" (click)="closePublicLinkModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Public Link for {{ selectedService?.title }}</h3>
        <button class="close-btn" (click)="closePublicLinkModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p>Share this link with your customers:</p>
        <div class="link-container">
          <input 
            type="text" 
            [value]="publicLink" 
            readonly 
            class="link-input"
            #linkInput>
          <button 
            class="btn btn-primary" 
            (click)="copyToClipboard(linkInput.value)"
            type="button">
            {{ linkCopied ? 'Copied!' : 'Copy' }}
          </button>
        </div>
        <div class="modal-actions">
          <button 
            class="btn btn-secondary" 
            (click)="regenerateLink()"
            [disabled]="isRegenerating"
            type="button">
            {{ isRegenerating ? 'Regenerating...' : 'Regenerate Link' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>